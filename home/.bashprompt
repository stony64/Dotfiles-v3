#!/usr/bin/env bash
# ------------------------------------------------------------------------------
# FILE:         .bashprompt
# VERSION:      1.3.4
# DESCRIPTION:  PS1 mit Uhrzeit statt Version und Git-Erkennung.
# ------------------------------------------------------------------------------

# --- FARBDEFINITIONEN (PS1-Maskiert) ------------------------------------------
readonly P_BLUE='\[\e[34m\]'
readonly P_GREEN='\[\e[32m\]'
readonly P_CYAN='\[\e[36m\]'
readonly P_YELLOW='\[\e[33m\]'
readonly P_RED='\[\e[31m\]'
readonly P_RESET='\[\e[0m\]'

# --- FUNKTIONEN ---------------------------------------------------------------

df_prompt_git() {
    local branch
    branch=$(git symbolic-ref --short HEAD 2>/dev/null || git rev-parse --short HEAD 2>/dev/null)
    [[ -n "$branch" ]] && printf " (%s)" "$branch"
}

# --- DYNAMISCHE FARBE FÃœR USER ------------------------------------------------
USER_COLOR="$P_GREEN"
[[ $EUID -eq 0 ]] && USER_COLOR="$P_RED"

# --- PROMPT-KONFIGURATION -----------------------------------------------------
# \t = Uhrzeit (HH:MM:SS)
# \u = User, \h = Host, \w = Pfad
PS1="${P_CYAN}[\t] ${USER_COLOR}\u${P_RESET}@\h:${P_BLUE}\w${P_YELLOW}\$(df_prompt_git)${P_RESET}\$ "

export PS1
